(function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],f=0,d=[];f<s.length;f++)i=s[f],o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("0905"),o=n.n(r);o.a},"06d1":function(t,e,n){"use strict";var r=n("874b"),o=n.n(r);o.a},"0905":function(t,e,n){},"1a13":function(t,e,n){},"1e58":function(t,e,n){"use strict";var r=n("3538"),o=n.n(r);o.a},3490:function(t,e,n){"use strict";var r=n("1a13"),o=n.n(r);o.a},3538:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("6d93");var r=n("2b0e"),o=n("755e"),a=(n("f5df"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",{staticClass:"main-wrapper"},[t._m(1),n("div",{staticClass:"main"},[n("container")],1)])])}),i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-background"},[n("div",{staticClass:"banner"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"display-1"},[t._v("Explore swiss railway stations")]),n("p",[t._v("\n        An interactive map that let you explorer the dense\n        network of railway stations in Switzerland\n      ")])])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"stations-map-container"},[n("Map",{staticClass:"stations-map",attrs:{stations:t.allStations,center:t.mapCenter},on:{update_bounds:function(e){return t.debounceUpdateBounds(e)},marker_clicked:function(e){return t.selection(e)}}},[n("map-window",{attrs:{selectedStation:t.selectedStation}})],1)],1),t.error?n("div",{staticClass:"error"},[t._v("\n    Woups! An error occured while loading data. Please try again later.\n  ")]):t._e(),t._m(0),n("section",{staticClass:"stations-list-container"},t._l(t.visibleStations,function(e){return n("ListItem",{key:e.id,staticClass:"list-item",attrs:{name:e.ort,address:e.adresse,mail:e.mail,services:e.services},on:{clicked:function(e){return t.selection(e)}}})}),1)])},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"toolbar"},[r("span",{staticClass:"body-1"},[t._v("Based on data from the bla")]),r("img",{staticClass:"logo",attrs:{src:n("b80c"),alt:"sbb-logo"}})])}],l=n("b047"),u=n.n(l),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GoogleMap",{attrs:{center:t.center,zoom:6,"map-type-id":"roadmap"},on:{bounds_changed:function(e){return t.$emit("update_bounds",e)}}},[t._t("default"),t._l(t.stations,function(e){return n("GoogleMarker",{key:e.id,attrs:{position:e.geopos,clickable:!0},on:{click:function(n){return t.$emit("marker_clicked",e)}}})})],2)},d=[],p={props:{stations:Array,center:Object}},v=p,b=n("0c7c"),m=Object(b["a"])(v,f,d,!1,null,null,null),h=m.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseButton",t._g({staticClass:"root"},t.$listeners),[n("div",{staticClass:"content"},[n("div",{staticClass:"title"},[t._v(t._s(t.name))]),n("div",{staticClass:"subheading"},[t._v(t._s(t.address))])]),n("div",{staticClass:"info"},[n("a",{staticClass:"mail",attrs:{href:"mailto:"+t.mail}},[t._v(t._s(t.mail))]),n("services-icons",{attrs:{services:t.services}})],1)])},_=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"icons"},t._l(t.icons,function(e){return n("i",{key:e,staticClass:"material-icons"},[t._v("\n    "+t._s(e)+"\n  ")])}),0)},w=[],O=n("6edf"),S=n.n(O);function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){C(t,e,n[e])})}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){return A(t)||G(t,e)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function G(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)if(n.push(i.value),e&&n.length===e)break}catch(c){o=!0,a=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw a}}return n}function A(t){if(Array.isArray(t))return t}var x,M={LUGGAGE:"LUGGAGE",LOUNGE:"LOUNGE",MONEY_EXCHANGE:"MONEY_EXCHANGE"},B={"Gepäckausgabe":M.LUGGAGE,"Gepäckaufbewahrung":M.LUGGAGE,"Businesstravel-Service-Center":M.LOUNGE,Geldwechsel:M.MONEY_EXCHANGE,"Western Union":M.MONEY_EXCHANGE},P=function(t){return t.map(function(t){return B[t]}).filter(Boolean)},$=function(t){return t.filter(function(t){return t.fields&&t.fields.geopos}).map(function(t){var e=t.recordid,n=t.fields,r=j(n.geopos,2),o=r[0],a=r[1];return{id:e,ort:n.ort,plz:n.plz,adresse:n.adresse,mail:n.mail,service:n.service,geopos:{lng:a,lat:o}}})},N=function(t){var e=S()(t,function(t){return t.plz}),n=function(t){var e=t[0],n=t.map(function(t){return t.service});return E({},e,{services:P(n)})};return Object.keys(e).map(function(t){var r=e[t];return n(r)})};function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=(x={},U(x,M.LUGGAGE,"work"),U(x,M.LOUNGE,"weekend"),U(x,M.MONEY_EXCHANGE,"monetization_on"),x),I={props:{services:{type:Array,default:function(){return[]}}},computed:{icons:function(){return this.services.map(function(t){return L[t]}).filter(Boolean)}}},z=I,T=(n("e65c"),Object(b["a"])(z,y,w,!1,null,"530a6a40",null)),W=T.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",t._g({staticClass:"button"},t.$listeners),[t._t("default")],2)},Y=[],q=(n("06d1"),{}),H=Object(b["a"])(q,X,Y,!1,null,"98d1a04c",null),D=H.exports,Q={props:{name:String,address:String,mail:String,services:Array},components:{ServicesIcons:W,BaseButton:D}},J=Q,R=(n("1e58"),Object(b["a"])(J,g,_,!1,null,"61a64692",null)),V=R.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return Boolean(t.selectedStation)?n("div",[n("GoogleInfoWindow",t._g({attrs:{position:t.selectedStation.geopos,options:t.infoOptions,opened:Boolean(t.selectedStation)}},t.$listeners),[n("div",{attrs:{id:"info-window"}},[n("div",{staticClass:"info-window-header"},[n("div",{staticClass:"title"},[t._v(t._s(t.selectedStation.ort))]),n("div",{staticClass:"subheading"},[t._v(t._s(t.selectedStation.adresse))])]),n("a",{staticClass:"mail",attrs:{href:"mailto:"+t.selectedStation.mail}},[t._v(t._s(t.selectedStation.mail))]),n("services-icons",{attrs:{services:t.selectedStation.services}})],1)])],1):t._e()},K=[],Z={props:{selectedStation:Object},components:{ServicesIcons:W},data:function(){return{infoOptions:{pixelOffset:{width:0,height:-35}}}},methods:{onClose:function(){}}},tt=Z,et=(n("3490"),Object(b["a"])(tt,F,K,!1,null,null,null)),nt=et.exports,rt=n("2f62"),ot={lng:8.2672744,lat:46.7263811};function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){it(t,e,n[e])})}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st={data:function(){return{error:!1,mapCenter:ot,mapBounds:null}},components:{Map:h,ListItem:V,MapWindow:nt},computed:at({visibleStations:function(){var t=this;return this.mapBounds&&this.allStations.length?this.allStations.filter(function(e){var n=e.geopos;return t.mapBounds.contains(n)}):[]}},Object(rt["c"])(["allStations","selectedStation"])),created:function(){this.debounceUpdateBounds=u()(this.updateBounds,500)},mounted:function(){this.getAllStations()},methods:at({},Object(rt["b"])(["getAllStations"]),{updateBounds:function(t){this.mapBounds=t},selection:function(t){console.log(t)}})},ct=st,lt=(n("6675"),Object(b["a"])(ct,s,c,!1,null,"ea3165b6",null)),ut=lt.exports,ft={name:"app",components:{container:ut}},dt=ft,pt=(n("034f"),Object(b["a"])(dt,a,i,!1,null,null,null)),vt=pt.exports,bt=n("b383"),mt=n.n(bt);function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return e&&gt(t.prototype,e),n&&gt(t,n),t}var yt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://data.sbb.ch/api/records/1.0/";ht(this,t),this.baseUrl=e}return _t(t,[{key:"request",value:function(t){var e=t.path,n=t.query,r=void 0===n?{}:n,o=mt.a.stringify(r),a="".concat(this.baseUrl).concat(e,"?").concat(o);return fetch(a).then(function(t){if(!t.ok)throw new Error("".concat(t.status," error requesting ").concat(t.url,": ").concat(t.statusText));return t.json()})}},{key:"getStations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.request({path:"/search",query:{dataset:"kontaktadressen",facet:"service",rows:t,start:e}}).then(function(t){var e=$(t.records);return N(e)})}}]),t}();r["a"].use(rt["a"]);var wt=10,Ot=!1,St={stations:[],selected:null},Et={allStations:function(t){return t.stations},selectedStation:function(t){return t.selected}},Ct={getAllStations:function(t){var e=t.commit,n=new yt;n.getStations(wt).then(function(t){e("setStations",t)}).catch(function(){throw new Error("cannot get stations")})}},jt={setStations:function(t,e){t.stations=e}},kt=new rt["a"].Store({state:St,getters:Et,actions:Ct,mutations:jt,strict:Ot});r["a"].config.productionTip=!1,r["a"].use(o,{load:{key:"AIzaSyDEkxPp_onhd84QRwwttC4MSSNgSXjYVQQ"},installComponents:!1}),r["a"].component("GoogleMap",o["Map"]),r["a"].component("GoogleMarker",o["Marker"]),r["a"].component("GoogleInfoWindow",o["InfoWindow"]),new r["a"]({store:kt,render:function(t){return t(vt)}}).$mount("#app")},6675:function(t,e,n){"use strict";var r=n("bcc3"),o=n.n(r);o.a},"874b":function(t,e,n){},b454:function(t,e,n){},b80c:function(t,e,n){t.exports=n.p+"img/sbb-logo.27e29377.png"},bcc3:function(t,e,n){},e65c:function(t,e,n){"use strict";var r=n("b454"),o=n.n(r);o.a}});
//# sourceMappingURL=app.e7721cd8.js.map